<Window x:Class="PPC.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:app="clr-namespace:PPC.App"
        xmlns:controls="clr-namespace:PPC.Controls;assembly=PPC.Controls"
        xmlns:playersViews="clr-namespace:PPC.Players.Views;assembly=PPC.Players"
        xmlns:shopViews="clr-namespace:PPC.Shop.Views;assembly=PPC.Shop"
        xmlns:inventoryViews="clr-namespace:PPC.Inventory.Views;assembly=PPC.Inventory"
        xmlns:popups="clr-namespace:PPC.Popups;assembly=PPC.Popups"
        x:Name="AppMainWindow"
        mc:Ignorable="d"
        SnapsToDevicePixels="True"
        d:DataContext="{d:DesignInstance app:MainWindowViewModelDesignData, IsDesignTimeCreatable=True}"
        WindowStyle="None"
        ResizeMode="CanResizeWithGrip"
        MouseLeftButtonDown="MainWindow_OnMouseLeftButtonDown"
        Icon="logo.png"
        Title="PPC Club" Height="600" Width="800"
        TextElement.FontSize="14">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/PPC.Styles;component/Styles.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/PPC.Styles;component/Images.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <SolidColorBrush Color="Black" 
                         Opacity=".20" 
                         x:Key="ModalPopupPresenterOverlayBrush"/>
            <DataTemplate DataType="{x:Type app:MainWindowViewModel}" x:Key="ShopTemplate">
                <shopViews:ShopView DataContext="{Binding ShopViewModel}"/>
            </DataTemplate>
            <DataTemplate DataType="{x:Type app:MainWindowViewModel}" x:Key="PlayersTemplate">
                <playersViews:PlayersView DataContext="{Binding PlayersViewModel}"/>
            </DataTemplate>
            <DataTemplate DataType="{x:Type app:MainWindowViewModel}" x:Key="InventoryTemplate">
                <inventoryViews:InventoryView DataContext="{Binding InventoryViewModel}"/>
            </DataTemplate>
            <DataTemplate DataType="{x:Type app:MainWindowViewModel}" x:Key="TestTemplate">
                <shopViews:ArticleSelectorView DataContext="{Binding TestViewModel}"/>
            </DataTemplate>
        </ResourceDictionary>
    </Window.Resources>
        <popups:ModalPopupPresenter x:Name="ModalPopupPresenter"
                                   OverlayBrush="{StaticResource ModalPopupPresenterOverlayBrush}">
        <controls:AdornedControl IsAdornerVisible="{Binding IsWaiting}">
            <controls:AdornedControl.AdornerContent>
                <controls:LoadingWait />
            </controls:AdornedControl.AdornerContent>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="2"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Header -->
                <Grid Grid.Column="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <!-- Go to shopping carts -->
                    <Button Grid.Row="0"
                            Width="64"
                            Margin="5"
                            Command="{Binding SwitchToShoppingCartsCommand}">
                        <Button.ToolTip>
                            <StackPanel Orientation="Vertical">
                                <TextBlock Text="{Binding ShopViewModel.ClientShoppingCartsCount, StringFormat={}Shopping carts: {0}}"/>
                                <TextBlock Text="{Binding ShopViewModel.UnpaidClientShoppingCartsCount, StringFormat={}Unpaid shopping carts: {0}}"/>
                                <TextBlock Text="{Binding ShopViewModel.PaidClientShoppingCartsCount, StringFormat={}Paid shopping carts: {0}}"/>
                            </StackPanel>
                        </Button.ToolTip>
                        <Image Style="{StaticResource AutoDisableImageStyle}"
                               Source="{StaticResource ShopImage}"/>
                    </Button>
                    <!-- Create new client -->
                    <Button Grid.Row="1"
                            Width="64"
                            Margin="5"
                            ToolTip="Add new client shopping cart"
                            Command="{Binding AddNewClientCommand}">
                        <Image Style="{StaticResource AutoDisableImageStyle}"
                               Source="{StaticResource PlusImage}"/>
                    </Button>
                    <!-- Go to sold articles -->
                    <Button Grid.Row="2"
                            Width="64"
                            Margin="5"
                            Command="{Binding SwitchToSoldArticlesCommand}">
                        <Button.ToolTip>
                            <StackPanel Orientation="Vertical">
                                <TextBlock Text="Sold articles and transactions"/>
                                <TextBlock Text="{Binding ShopViewModel.SoldArticlesTotalCash, StringFormat={}Cash: {0:C}}"/>
                                <TextBlock Text="{Binding ShopViewModel.SoldArticlesTotalBankCard, StringFormat={}Bank card: {0:C}}"/>
                                <TextBlock Text="{Binding ShopViewModel.SoldArticlesTotal, StringFormat={}Total: {0:C}}"/>
                            </StackPanel>
                        </Button.ToolTip>
                        <Grid>
                            <Image Style="{StaticResource AutoDisableImageStyle}"
                                   Source="{StaticResource TransactionsImage}"/>
                            
                            <!--<StackPanel Orientation="Vertical"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center">
                                <StackPanel.Resources>
                                    <Style TargetType="{x:Type TextBlock}">
                                        <Setter Property="Opacity" Value="0.8"/>
                                        <Setter Property="FontWeight" Value="Bold"/>
                                        <Setter Property="Foreground" Value="CornflowerBlue"/>
                                    </Style>
                                </StackPanel.Resources>
                                <TextBlock Text="{Binding ShopViewModel.SoldArticlesTotalCash, StringFormat=C}"/>
                                <TextBlock Text="{Binding ShopViewModel.SoldArticlesTotalBankCard, StringFormat=C}"/>
                                <TextBlock Text="{Binding ShopViewModel.SoldArticlesTotal, StringFormat=C}"/>
                            </StackPanel>-->
                        </Grid>
                    </Button>
                    <!-- Players -->
                    <Button Grid.Row="3"
                            Width="64"
                            Margin="5"
                            ToolTip="Players"
                            Command="{Binding SwitchToPlayersCommand}">
                        <Image Style="{StaticResource AutoDisableImageStyle}"
                               Source="{StaticResource PlayersImage}"/>
                    </Button>
                    <!-- Inventory -->
                    <Button Grid.Row="4"
                            Width="64"
                            Margin="5"
                            ToolTip="Players"
                            Command="{Binding SwitchToInventoryCommand}">
                        <Image Style="{StaticResource AutoDisableImageStyle}"
                               Source="{StaticResource ListImage}"/>
                    </Button>
                    <!-- Text -->
                    <Button Grid.Row="5"
                            Width="64"
                            Height="32"
                            Margin="5"
                            ToolTip="Text"
                            Command="{Binding SwitchToTestCommand}">
                        <TextBlock Text="Test"/>
                    </Button>
                    <!-- dummy row 6 -->
                    <!-- Reload -->
                    <Button Grid.Row="7"
                            Width="64"
                            Margin="5"
                            ToolTip="Load previous session"
                            Command="{Binding ReloadCommand}">
                        <Image Style="{StaticResource AutoDisableImageStyle}"
                               Source="{StaticResource RefreshImage}"/>
                    </Button>
                    <!-- Shutdown -->
                    <Button Grid.Row="8"
                            Width="64"
                            Margin="5"
                            ToolTip="Cash registry closure"
                            Command="{Binding CloseCommand}">
                        <Image Style="{StaticResource AutoDisableImageStyle}"
                               Source="{StaticResource PowerImage}"/>
                    </Button>
                </Grid>
                
                <!-- Vertical separator -->
                <Separator Grid.Column="1"
                           Margin="0,2"
                           Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}"/>

                <!-- Content -->
                <ContentControl Grid.Column="2"
                                Margin="3"
                                Content="{Binding}">
                    <ContentControl.Style>
                        <Style TargetType="{x:Type ContentControl}">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding ApplicationMode}" Value="{x:Static app:ApplicationModes.Shop}">
                                    <Setter Property="ContentTemplate" Value="{StaticResource ShopTemplate}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding ApplicationMode}" Value="{x:Static app:ApplicationModes.Players}">
                                    <Setter Property="ContentTemplate" Value="{StaticResource PlayersTemplate}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding ApplicationMode}" Value="{x:Static app:ApplicationModes.Inventory}">
                                    <Setter Property="ContentTemplate" Value="{StaticResource InventoryTemplate}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding ApplicationMode}" Value="{x:Static app:ApplicationModes.Test}">
                                    <Setter Property="ContentTemplate" Value="{StaticResource TestTemplate}"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </ContentControl.Style>
                </ContentControl>
            </Grid>
        </controls:AdornedControl>
    </popups:ModalPopupPresenter>
</Window>
